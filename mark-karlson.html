<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Mark</title>
    <link
      rel="stylesheet"
      href="https://abibby.github.io/character-sheet/main.css"
    />
  </head>

  <body>
    <div id="character"></div>

    <script type="module">
      import { Character } from "https://abibby.github.io/character-sheet/index.js";
      const char = new Character();

      char.name = "Mark Karlson";
      char.playerName = "Adam Bibby - 1521-11";

      char.setStats({
        str: 13,
        dex: 9,
        con: 13,
        int: 8,
        wis: 15,
        cha: 14,
      });

      char.setRace("Firbolg (Aasimar)", (c) => {
        c.stats.str.add(1);
        c.stats.wis.add(2);

        c.addLimitedFeature("Detect Magic", 1, "sr");
        c.addLimitedFeature("Disguise Self", 1, "sr");
        // c.addSpell('Detect Magic')
        // c.addSpell('Disguise Self')

        c.addLimitedFeature("Hidden Step", 1, "sr");

        c.addFeature("Powerful Build");
        c.addFeature("Speech of Beast and Leaf");

        /**
         * Starting at 3rd level, you can use your action to unleash the
         * divine energy within yourself, causing your eyes to glimmer and
         * two luminous, incorporeal wings to sprout from your back. Your
         * transformation lasts for 1 minute or until you end it as a bonus
         * action. During it, you have a flying speed of 30 feet, and once
         * on each of your turns, you can deal extra radiant damage to one
         * target when you deal damage to it with an attack or a spell. The
         * extra radiant damage equals your level.
         *
         * Once you use this trait, you can't use it again until you finish
         * a long rest.
         */
        c.addLimitedFeature("Radiant Soul (1h)", 1, "lr");

        c.speed = 30;
      });

      char.setBackground("Acolyte", (c) => {
        c.addSkillProficiency("insight");
        c.addSkillProficiency("religion");
      });

      char.levelUp("Cleric", (c) => {
        // 1
        c.addSubclass("Cleric", "Life Domain");
        c.addSkillProficiency("history");
        c.addSkillProficiency("medicine");
        c.addSaveProficiency("wis");
        c.addSaveProficiency("cha");

        c.addFeature("Turn Undead");

        c.addSpell("Bless");
        c.addSpell("Cure Wounds");

        c.setSpellSaveStat("wis");
      });

      char.levelUp("Cleric", (c) => {
        // 2
        c.addLimitedFeature("Channel Divinity: Preserve Life", 1, "sr");
      });
      char.levelUp("Cleric", (c) => {
        // 3
        c.addSpell("Lesser Restoration");
        c.addSpell("Spiritual Weapon");
      });
      char.levelUp("Cleric", (c) => {
        // 4
        c.stats.wis.add(2);
      });
      char.levelUp("Cleric", (c) => {
        // 5
        c.addFeature("Destroy Undead (CR 1/2)");

        c.addSpell("Beacon of Hope");
        c.addSpell("Revivify");
      });
      char.levelUp("Cleric", (c) => {
        // 6
        c.addFeature("Blessed Healer");
        c.updateLimitedFeature("Channel Divinity: Preserve Life", { uses: 2 });
      });
      char.levelUp("Cleric", (c) => {
        // 7
        c.addSpell("Death Ward");
        c.addSpell("Guardian of Faith");
      });
      char.levelUp("Cleric", (c) => {
        // 8
        c.addFeature("Destroy Undead (CR 1)");

        c.addFeature("Divine Strike");
        c.stats.wis.add(1);
        c.stats.con.add(1);
      });
      char.levelUp("Cleric", (c) => {
        // 9
        c.addSpell("Mass Cure Wounds");
        c.addSpell("Raise Dead");
      });
      char.levelUp("Cleric", (c) => {
        // 10
        c.addLimitedFeature("Divine Intervention", 1, "week");
      });
      char.levelUp("Cleric", (c) => {
        // 11
        c.addFeature("Destroy Undead (CR 2)");
      });
      char.levelUp("Cleric", (c) => {
        // 12
        c.addFeat("War Caster", (c) => {});
      });
      char.levelUp("Cleric", (c) => {
        // 13
      });
      char.levelUp("Cleric", (c) => {
        // 14
        c.addFeature("Destroy Undead (CR 3)");
      });
      char.levelUp("Cleric", (c) => {
        // 15
      });
      char.levelUp("Cleric", (c) => {
        // 16
        c.stats.con.add(2);
      });
      char.levelUp("Cleric", (c) => {
        // 17
        c.addFeature("Destroy Undead (CR 4)");
        c.addFeature("Supreme Healing");
      });
      char.levelUp("Cleric", (c) => {
        // 18
        c.updateLimitedFeature("Channel Divinity: Preserve Life", { uses: 3 });
      });
      char.levelUp("Cleric", (c) => {
        // 19
        c.addFeat("Telekinetic", (c) => {
          c.stats.wis.add(1);
        });
      });

      char.addItem("Shining Plate Armor", (c) => {
        c.setAC(18 + 1);
      });

      // char.addItem('Shied', c => {
      //     c.addAC(2)
      // })
      // char.addItem('Shied', c => {
      //     c.addAC(2)
      // })
      // char.addItem("Tower Shied, Purple", (c) => {
      //   c.addAC(4);
      // });
      char.addItem("Tower Shield, Droysium", (c) => {
        c.addAC(4 + 1);
      });
      char.addItem("Cloak", (c) => {});

      // char.addItem('Light Hammer', c => {
      //     c.addAttack({
      //         name: 'Light Hammer',
      //         damage: () => `1d4 + ${c.stats.str.mod()}`,
      //         type: 'attack',
      //         attackBonus: () => c.stats.str.mod() + c.proficiencyBonus,
      //         range: '20/60',
      //     })
      // })
      // char.addItem('Sickle', c => {
      //     c.addAttack({
      //         name: 'Sickle',
      //         damage: () => `1d4 + ${c.stats.str.mod()}`,
      //         type: 'attack',
      //         attackBonus: () => c.stats.str.mod() + c.proficiencyBonus
      //     })
      // })
      char.addItem("Holy Symbol", (c) => {});
      char.addItem("Sunburst Pendant, 100gp", (c) => {});
      // char.addItem('Reliquary, 1,000gp with religious text', c => { })

      // char.addItem("Eye of the Tiger", (c) => {
      //   // Cast a spell at 5th level using the lowest level the spell it can
      //   // be cast.
      //   c.addLimitedFeature("Eye of the Tiger", 2, "lr");
      // });

      char.addItem("Faith's Ju Ju", (c) => {
        c.stats.int.set(18)
        // c.addAC(2 + 2);
        // c.spellSaveDC += 1
      });

      char.addFeature(
        "Tattoo: Hammer and Sickle",
        `You emit an aura within
five feet of you and anybody in this aura can use anybody else's saving throw
modifier in place of their own when they have to make a save, so long as they
are within the aura as well `
      );

      char.addLimitedFeature(
        "Radiant Soul",
        1,
        "lr",
        `Starting at 3rd level, you can use your action to unleash the divine
        energy within yourself, causing your eyes to glimmer and two luminous,
        incorporeal wings to sprout from your back.
        
        Your transformation lasts for 1 hour or until you end it as a bonus
        action. During it, you have a flying speed of 60 feet, and once on each
        of your turns, you can deal extra radiant damage to one target when you
        deal damage to it with an attack or a spell. The extra radiant damage
        equals your level.

        Once you use this trait, you can't use it again until you finish a long
        rest.`
      );

      // Cantrips
      char.addSpell("Guidance");
      char.addSpell("Light");
      char.addSpell("Thaumaturgy");
      char.addSpell("Toll the Dead", (c) => {
        c.addAttack({
          name: "Toll the Dead",
          damage: () => "3d8 (3d12)",
          type: "save",
          save: "wis",
          saveDC: () => c.spellSaveDC,
          range: "60",
        });
      });
      char.addSpell("Word of Radiance", (c) => {
        c.addAttack({
          name: "Word of Radiance",
          damage: () => "3d6",
          type: "save",
          save: "con",
          saveDC: () => c.spellSaveDC,
          range: "5",
        });
      });

      // Level 1
      char.addSpell("Healing Word");
      // char.addSpell('Shield of Faith')

      // Level 2
      // char.addSpell('Blindness/Deafness')
      char.addSpell("Silence");
      char.addSpell("Zone of Truth");
      char.addSpell("Hold Person");
      char.addSpell("Calm Emotions");
      char.addSpell("Prayer of Healing");

      // Level 3
      char.addSpell("Mass Healing Word");
      char.addSpell("Water Walk");
      char.addSpell("Meld into Stone");
      char.addSpell("Sending");
      // char.addSpell('Fast Friends')

      // Level 4
      char.addSpell("Control Water");
      char.addSpell("Stone Shape");
      char.addSpell("Freedom of Movement");
      // char.addSpell('Banishment')

      // Level 5
      char.addSpell("Dawn");
      char.addSpell("Greater Restoration");
      char.addSpell("Holy Weapon");
      // char.addSpell('Contagion')

      // Level 6
      // char.addSpell('Harm')
      // char.addSpell('Planar Ally')
      // char.addSpell("True Seeing");
      char.addSpell("Word of Recall");
      char.addSpell("Heroes' Feast");

      // level 7
      char.addSpell("Regenerate");
      // char.addSpell('Conjure Celestial')
      char.addSpell("Etherealness");
      char.addSpell("Temple of the Gods");

      // level 8
      // char.addSpell('Antimagic Field')
      char.addSpell("Holy Aura");
      // char.addSpell('Control Weather')

      // level 9
      char.addSpell("Mass Heal");

      char.assert(
        (c) =>
          c.level.get("Cleric") +
          c.stats.wis.mod() +
          5 /* cantrips */ +
          10 /* cleric */,
        (c) => c.spells.length,
        "Number of spells"
      );

      char.assert(
        (c) => new Set(c.spells).size,
        (c) => c.spells.length,
        "No duplicate spells"
      );

      char.assert(
        (c) => 27,
        (c) => c.pointBuy(),
        "invalid point buy"
      );

      char.render().then((html) => {
        document.getElementById("character").innerHTML = html;
      });
    </script>
  </body>
</html>
